## Nulink

Discord : https://discord.gg/w964Qzre

Twitter : https://twitter.com/NuLink_

Website : https://www.nulink.org/


#### Этапы тестовой сети
```
Программа будет проходить в несколько этапов, каждый из которых предназначен для тестирования различных аспектов сети и развития общей экосистемы.

Этап 1: (15 сентября - 20 ноября)

Этот этап будет сосредоточен на тестировании функции рабочего узла Nulink и функции размещения Dapp и продлится с 15 сентября по 20 ноября. Функциональные тестировщики будут участвовать в серии конкурсных заданий и управляемых испытаний. С каждым испытанием у участников будет возможность заработать токены.

Этап 2: (20 октября - 20 ноября)

Этот этап будет посвящен тестированию функции секретного агента обмена файлами Nulink и функции Dapp. Функциональные тестировщики проверят каждую секретную функцию обмена файлами и предоставят обратную связь, чтобы помочь нам улучшить продукт.
```
#### Открываем порт и обновляемся, скачиваем зависимости
```
sudo ufw allow 9151
sudo apt-get update && apt-get upgrade -y
sudo apt-get -y install libssl-dev && apt-get -y install cmake build-essential git wget jq make gcc
```

#### Скачиваем geth
```
wget https://gethstore.blob.core.windows.net/builds/geth-linux-amd64-1.10.23-d901d853.tar.gz

tar -xvzf geth-linux-amd64-1.10.23-d901d853.tar.gz

cd geth-linux-amd64-1.10.23-d901d853/

./geth account new --keystore ./keystore
```
```
INFO [09-08|15:30:11.904] Maximum peer count                       ETH=50 LES=0 total=50
INFO [09-08|15:30:11.905] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
Your new account is locked with a password. Please give a password. Do not forget this password.
Password: 
Repeat password: 
Your new key was generated


Public address of the key:   0x8B1819341BEc211a45a2186C4D0030681cccE0Ee
Path of the secret key file: /root/geth-linux-amd64-1.10.23-d901d853/keystore/UTC--2022-09-13T01-14-32.465358210Z--8b1819341bec211a45a2186c4d0030681ccce0ee

- You can share your public address with anyone. Others need it to interact with you.
- You must NEVER share the secret key with anyone! The key controls access to your funds!
- You must BACKUP your key file! Without the key, it's impossible to access account funds!
- You must REMEMBER your password! Without the password, it's impossible to decrypt the key!
```

#### Install Docker Engine
Pull the latest NuLink image.
```
cd /root

sudo apt install docker.io -y

sudo systemctl enable --now docker

docker pull nulink/nulink:latest

cd /root

mkdir nulink
```
Create a directory in your host machine for later usage.

Copy the keystore file of the Worker account to the host directory selected in step 3. The private file generated by NuLink Worker will also be stored in this directory. Please ensure that this directory has 777 permissions:
#### Замените `UTC--2022-09-13T01-14-32.465358210Z--8b1819341bec211a45a2186c4d0030681ccce0ee` на свое значение
``` 
cp /root/geth-linux-amd64-1.10.23-d901d853/keystore/UTC--2022-09-13T01-14-32.465358210Z--8b1819341bec211a45a2186c4d0030681ccce0ee /root/nulink
chmod -R 777 /root/nulink
 ```
#### Создаем пароль
```
export NULINK_KEYSTORE_PASSWORD=<your password>

export NULINK_OPERATOR_ETH_PASSWORD=<your password>
```
#### Установка виртуальной машины
```
pip install virtualenv
```
#### Направляем пакеты
```
virtualenv /root/nulink-venv
```
#### Активируем виртуальную среду
```
source /root/nulink-venv/bin/activate
```
#### Работа с пакетами 
```
wget https://download.nulink.org/release/core/nulink-0.2.0-py3-none-any.whl
pip install nulink-0.2.0-py3-none-any.whl
```
#### Активация nulink 
```
source /root/nulink-venv/bin/activate
```
#### python -c "import nulink"
outpoot: ничего не должно быть
#### Проверка работы
```
nulink --help
sage: nulink [OPTIONS] COMMAND [ARGS]...


  Top level command for all things nulink.


Options:

  --version       Echo the CLI version

  --config-path   Echo the configuration root directory path

  --logging-path  Echo the logging root directory path

  --help          Show this message and exit.


Commands:

  alice     "Alice the Policy Authority" management commands.

  bob       "Bob management commands.

  bond      Bond an operator to a staking provider.

  contacts  Lightweight contacts utility to store public keys of known...

  enrico    "Enrico the Encryptor" management commands.

  porter    Porter management commands.

  status    Echo a snapshot of live NuLink Network metadata.

  unbond    Unbonds an operator from an authorized staking provider.

  ursula    "Ursula the Untrusted" PRE Re-encryption node management...
```
#### Сохраняем пароли в docker,запуск
```
docker run -it --rm \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
nulink/nulink nulink ursula init \
--signer keystore:///code/UTC dahil ve sonrasını ekle \
--eth-provider https://data-seed-prebsc-2-s2.binance.org:8545  \
--network horus \
--payment-provider https://data-seed-prebsc-2-s2.binance.org:8545 \
--payment-network bsc_testnet \
--operator-address PUBLICadresiniz \
--max-gas-price 100
```
#### Стартуем узел 
```
docker run --restart on-failure -d \
--name ursula \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
-e NULINK_OPERATOR_ETH_PASSWORD \
nulink/nulink nulink ursula run --no-block-until-ready
```

#### Смотрим журналы и логи
```
apt install screen
screen -S log
docker logs -f ursula
```

#### Переходим на платформу, делаем стейк, вставляем в воркер адрес наш сгенерированный 
https://test-staking.nulink.org/
https://123.45.678:9151- вставляем наш ip


#### Update 20/10/2022
```
docker kill ursula
docker rm ursula
```
```
export NULINK_KEYSTORE_PASSWORD=<password>

export NULINK_OPERATOR_ETH_PASSWORD=<password>
```
#### Last version installation
```
docker pull nulink/nulink:latest

####################################################
latest: Pulling from nulink/nulink
Digest: sha256:9607f6d91eab6c852ee17eb2210a0a51b73a0b3c8c6d0c8db1bea71bbf868337
Status: Image is up to date for nulink/nulink:latest
docker.io/nulink/nulink:latest

```
#### Start
```
docker run --restart on-failure -d \
--name ursula \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
-e NULINK_OPERATOR_ETH_PASSWORD \
nulink/nulink nulink ursula run --no-block-until-ready
```
#### Check
```
apt install screen
screen -S log
docker logs -f ursula
```
#### Update

Stop the running node in Docker
```
$ docker kill <container ID>

$ docker rm <container ID>
```
 Pull the latest NuLink image.
```
$ docker pull nulink/nulink:latest
```
Re-launch the worker node.
```
$ docker run --restart on-failure -d \
--name ursula \
-p 9151:9151 \
-v /root/nulink:/code \
-v /root/nulink:/home/circleci/.local/share/nulink \
-e NULINK_KEYSTORE_PASSWORD \
-e NULINK_OPERATOR_ETH_PASSWORD \
nulink/nulink nulink ursula run --no-block-until-ready
```
Если встретили ошибку:
```
Error: Gateway Time-out for url: https://data-seed-prebsc-2-s2.binance.org:8545
```
То выполните:
```
docker stop ursula
```
Перейдите в директорию /nulink,откройте ursula.json и замените значение в `eth_provider_uri` на "https://bsc-testnet.public.blastapi.io"
Restart
```
docker restart ursula
```
